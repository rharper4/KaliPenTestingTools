# About me

Hello, My name is Robert H. and I'm an aspiring Cyber Security enthusiast. I love learning about different things pertaining to the cyber sector with my primary interest being malware analysis. Although my primary focus is in malware analysis, I absolutely love learning about cyber security as a whole and hope to integrate my journey along with the different concepts I've learned throughout my time in university, and the field, into different educational repositories on my Github. My hope is to help serve the community and display one of the many different paths you can take to get into the field and learn about cyber security. This project is one of those concepts and is primarily meant to show-case the powerful library of tools known as Kali. I hope to take you along with me in learning the basics of Kali, and just how powerful it can be!

* * *

# Pre-Requisites for this Lab

Please check out my github page documenting how to build and host a LAMP stack application within your virtual machine - This can be found here [Building a LAMP stack application](https://github.com/rharper4/LAMP-Stack-App)

* * *

# What is Kali Linux?

[Kali Linux Download Page](https://www.kali.org/)

Kali is a comprehensive, free, open-source linux distribution of over 600 tools that is often times understood to be one of the most advanced pentation testing distributions/suites that is publicly available. all of these 600 bundled penetration testing tools are pre-configured for ease of use to properly work with each other.

* * *

# What is Penetration Testing and Why is it Important?

Penetration testing, or ethical hacking, is a critical cybersecurity practice where simulated cyber attacks are conducted to identify and prioritize vulnerabilities in computer systems, networks, or applications. It serves as a proactive measure to prevent data breaches, ensure compliance with regulations, and maintain operational continuity by addressing security weaknesses before they are exploited by malicious attackers. This process is essential for protecting sensitive data, saving on potential breach costs, and building trust in an organization's commitment to cybersecurity.

* * *

# Key Components of Completing a Vulnerability Analysis Utilizing Kali

1.  **High-Level Map of Assets**:
    
    - Begin with an inventory of all physical and digital assets. Utilize tools like `Nmap` for discovering devices on the network and `Wireshark` for understanding the network's topology through traffic analysis.
2.  **Identification of Technical Resources**:
    
    - Use `Nmap` and `Metasploit Framework` to identify tech resources, including equipment and software versions. This helps in understanding the attack surface.
3.  **Network Data and Workflow Diagrams**:
    
    - Tools like `Wireshark` and `Nmap` can assist in mapping out network data flows and creating detailed workflow diagrams, which are crucial for identifying potential vulnerability points.
4.  **Network Traffic Analysis**:
    
    - Employ `Wireshark` for deep network traffic analysis to monitor for anomalies or suspicious activities that might indicate a security weakness or ongoing attack.
5.  **Data Flow Analysis**:
    
    - Analyze expected data flows using `Wireshark` and `Burp Suite` to ensure data is only traversing through secure and intended paths, identifying any deviations that could point to vulnerabilities.
6.  **Access Control Models**:
    
    - Review and test access control models using tools like `Metasploit Framework` to simulate attacks on authentication mechanisms and `John the Ripper` for cracking weak passwords.
7.  **Software Catalogs, Licensing, and Patch Status Review**:
    
    - Use `Nessus` to scan for unpatched vulnerabilities and software that's out-of-date or no longer supported, which are common entry points for attackers.
8.  **Use of Tools (e.g., AntiVirus, FIC, IDS/IPS, Privileges, etc.)**:
    
    - Leverage `Nessus` and `Metasploit Framework` to test the effectiveness of defensive tools like AntiVirus, IDS/IPS, and privilege management systems against known vulnerabilities and exploits.
9.  **Schedule and Plan for Analysis -> Feedback -> Corrections Cycle**:
    
    - Establish a continuous cycle of vulnerability analysis using the mentioned tools, followed by the consolidation of feedback and implementation of corrections. Utilize `Gobuster` for ongoing web application testing, and `SQLmap` for database security assessments, feeding results back into the planning process for remediation and improvement.

This integrated approach combines Kali Linux's powerful tools with strategic planning and analysis elements to ensure a comprehensive vulnerability assessment and continuous improvement cycle. By doing so, organizations can maintain a robust defense against evolving cybersecurity threats.

**Note:** In this Repo we wont be going over all of these tools, but it's important to briefly understand what a lot of these tools can do as they may be very important if you are interested in performing a penetration test.

* * *

# How might a Threat Actor get access to your Organization?

In the realm of cybersecurity, both attackers aiming to compromise systems and defenders working to protect them employ a structured approach. This process can be divided into four primary stages, each critical in understanding and safeguarding digital environments.

## 1\. **Discovery: Scoping the Digital Horizon**

- **Objective:** To map the digital terrain, identifying all accessible systems, networks, and digital assets. This stage is about understanding the scope of what's reachable and potentially vulnerable—essentially finding what lies within range.
- **Tools & Techniques:** Utilizing tools like `Nmap` for network scanning and `Wireshark` for monitoring network traffic, defenders can mirror attackers' efforts to discover accessible resources, laying the groundwork for a robust defense strategy.

## 2\. **Identification: Assessing Value and Vulnerability**

- **Objective:** To pinpoint devices, hosts, and services that present the highest value—either as critical assets for defenders to protect or as prime targets for attackers. This involves a detailed assessment to identify the most strategically significant elements within the digital ecosystem.
- **Tools & Techniques:** Applying advanced scanning tools and methodologies to discern the operational importance and potential weaknesses of each identified asset, facilitating focused protection efforts where they are most needed.

## 3\. **Exploiting: Unearthing Weaknesses**

- **Objective:** For attackers, this stage is about finding and leveraging vulnerabilities to stage potential attacks. Defenders, conversely, aim to preemptively identify and mitigate these same vulnerabilities to prevent exploitation.
- **Tools & Techniques:** Tools such as the `Metasploit Framework` offer insights into existing vulnerabilities and how they might be exploited, enabling defenders to understand potential attack vectors and reinforce their defenses accordingly.

## 4\. **Gaining Control and Elevating Privileges: The Ultimate Breach**

- **Objective:** The final goal for attackers is to exploit identified vulnerabilities to achieve their objectives, whether for control, data exfiltration, or destruction. Defenders use this knowledge to anticipate and block these moves, aiming to prevent unauthorized access and privilege escalation.
- **Tools & Techniques:** By simulating attack paths, using tools to test system resilience, and continuously monitoring for unusual activity, you as a defender can strengthen security measures, ensuring they remain several steps ahead of potential breaches.

* * *

# Moving On to the Demonstration of Kali Tools

**DISCLAIMER**: Some tools within Kali can be very dangerous for your system, please exercise extreme caution if deciding to follow along. Please ensure that if following along all exercises will and SHOULD be performed on a virtual machine in a controlled and protected environment.

## LAMP stack application

In a previous repository, I've provided an in-depth tutorial on how to create a rudimentary LAMP stack application. That lamp stack application will be used today as our **target environment** to display different penetration testing techniques. If you are unfamiliar with how to create a simple LAMP stack application, please visit my repository explaining this in depth! [Repository Link](https://github.com/rharper4/LAMP-Stack-App)

## Inside of Kali

After you have the LAMP stack set up on your separate ubuntu virtual environment, sign into your Kali environment and ensure that your network type is set to bridged within the network settings on your VM.

* * *

# Tool #1 Nmap -

## What is Nmap?

Nmap is a network exploration tool and security scanner that's very useful for anyone who works with networks or computers. Here's how you can use it effectively on Kali.

## Why does it matter?

In the real world, attackers often use Nmap as a first step to identify potential targets and find vulnerabilities. By scanning for open ports and services, attackers can gather crucial information about a system's defenses, including what software versions are running and whether any ports are inadequately protected. This information helps them to craft more effective attack strategies, targeting specific weaknesses they’ve discovered. For example, if Nmap reveals an outdated web server, an attacker might exploit known vulnerabilities associated with that version to gain unauthorized access. Essentially, Nmap helps attackers by simplifying the reconnaissance phase, allowing them to map out a network’s structure and identify the path of least resistance.

On the flip side, defenders use Nmap to conduct their security audits and vulnerability assessments. By regularly scanning their own networks, defenders can spot unexpected changes or signs of a potential breach, such as new, open ports or unfamiliar services running on their devices. This enables them to patch vulnerabilities, close unnecessary ports, and strengthen their network’s security posture before attackers can exploit them. Furthermore, understanding how attackers use Nmap allows defenders to better anticipate their tactics and deploy countermeasures, such as intrusion detection systems and firewalls, to monitor and block malicious traffic. Thus, Nmap is a double-edged sword—it's not just a tool for attackers but a critical component of a defender’s arsenal to protect against cyber threats effectively.

## NMap Installation

Typically this tool comes preloaded into your kali arsenol but just in case your version is old, it's always best practice to update the systems package list by typing `sudo apt update` into your terminal.

If you recieve an error, then likely its because you have a version that has not yet installed nmap, in which case you may use the command `sudo apt install nmap`

you can check that nmap is successfully installed and what version you have by using the command `nmap --version`

Nmap can be used for various tasks such as identifying devices on a network and what services (like web servers or FTP servers) they're offering.

## Identifying active devices with NMap

To find out which devices are active on your network, you'll first want to know your own ip address within the virtual machine by using the command `ip addr` within your terminal. Once you know your ip address you can use the command `nmap -sn xxx.xxx.x.x/xx` with the x being your ip address. This command sends a ping to each address in the network to see if it responds.

## Scanning ports with NMap

Another incredible feature within NMap is the ability to scan for open ports. Open ports can tell you what services a device is running. To scan all ports on a specific device, use `nmap -p 1-65535 xxx.xxx.x.xxx` with the X's being your network's address and the

## Theres much much more

You can read about all of the different things NMap is capable of in the documentation which can be found [here](https://nmap.org/book/toc.html)

Below are some examples of the most noteable features -

Performing a Stealth Scan - `nmap -sS xxx.xxx.x.xxx`[](https://www.wireshark.org/docs/)

Detecting the Operating System of a Device - `nmap -A xxx.xxx.x.xxx`

Utilizing Nmap's Scripting Engine -  
`nmap --script=vuln xxx.xxx.x.xxx`

Saving and Reviewing Results - `nmap xxx.xxx.x.xxx > results_name_here.txt`

Saving Results in XML Format - `nmap -oX output.xml xxx.xxx.x.xxx`

* * *

# Tool #2 Spooftooph

## What is Spooftooph?

Spooftooph is designed to automate spoofing or cloning Bluetooth device information. Make a device discoverable via Bluetooth, and Spooftooph can clone it, making this tool invaluable for security researchers and professionals in penetration testing.

## Why does it matter?

In the cybersecurity arena, understanding the capabilities of Bluetooth devices for both legitimate and illegitimate purposes is crucial. Attackers might use Spooftooph to clone a trusted device's Bluetooth identity, allowing them to connect to other devices that trust the original. This could lead to unauthorized access and data theft. On the defensive side, security professionals use Spooftooph to identify vulnerabilities in Bluetooth security configurations and to understand how an attacker might exploit these vulnerabilities. This knowledge enables them to strengthen security measures, such as improving authentication processes and encrypting communication channels, to protect sensitive data from being intercepted or tampered with.

## Spooftoof Installation

Although Spooftooph is a specialized tool, it might not come pre-installed on all Kali Linux distributions. To ensure it's available for your use, you'll likely need to install it manually:

1.  Update your system's package list to make sure you have the latest versions of your software: `sudo apt update`
2.  Install spooftooph with the following command: `sudo apt install spooftooph`
3.  Verify the installation and check the version of Spooftooph `spooftooph --version`

# Identifying Bluetooth Devices with Spooftooph

To list all nearby discoverable bluetooth devices use: `spooftooph -i` this command allows you to identify bluetooth devices within the area, which is useful for both reconnaissance in penetration testing and for ensuring your own devices are not unecessarily exposed.

# Cloning a device with Spooftooph

To clone a device, you first need its bluetooth address which can be obtained with the -i flag as mentioned previously.  
Next enter the command: `spooftooph -n [Device_Name] -a [Device_Address] -i hci0`

Replace '\[Device_Name\]' with the name of the device you're cloning and '\[Device_Address\]' with its Bluetooth address. 'hci0' is typically the identifer for your bluetooth device on kali.

## Advanced Features of Spooftooph:

1.  To create a device with a randomly generated name and address, use `spooftooph -R`
2.  To write Device Information to a file for documentation or further analysis, save device information using `spooftooph -w filenamehere`

* * *

# Tool #3: Wireshark

## What is Wireshark?

Wireshark is the world's foremost and widely-used network protocol analyzer. It lets you see what's happening on your network at a microscopic level, being the de facto standard across many industries, educational institutions, and non-profit organizations for troubleshooting, analysis, software and protocol development, and education.

## Why does it matter?

Wireshark is essential for both offensive and defensive cybersecurity practices. For attackers, Wireshark can be used to capture packets transmitted over a network, analyze their contents, and find vulnerabilities or sensitive information being transmitted unencrypted. This can include passwords, personal data, or proprietary information. On the defensive side, cybersecurity professionals use Wireshark to monitor network traffic in real-time, identify suspicious activities, and diagnose issues with network applications. It can help in identifying the source of network attacks, understanding attack patterns, and taking measures to protect the network from future attacks. Essentially, Wireshark provides a comprehensive view of a network's traffic, enabling users to secure their networks against malicious activities effectively.

## Wireshark Installation

While Wireshark is often included with many distributions of Kali Linux, ensuring you have the most up-to-date version is always best practice:

1.  Update your package list to ensure you can download the latest version of Wireshark:
    
    ```
    sudo apt update
    ```
    
2.  Install Wireshark using the following command:
    
    ```
    sudo apt install wireshark
    ```
    
    During the installation, you may be asked whether non-superusers should be able to capture packets. Answer according to your security policies.
    
3.  Confirm Wireshark is installed correctly:
    
    ```
    wireshark --version
    ```
    
    This checks the installed version of Wireshark on your system.
    

## Launching Wireshark and Capturing Packets

To start capturing packets with Wireshark, you'll need to run the application with sufficient privileges:

- To open Wireshark, type `wireshark` in your terminal or search for Wireshark in your application menu.
- Select the network interface you wish to monitor from the main Wireshark window.
- Click on the "Start Capturing" button to begin capturing packets on that interface.

## Analyzing Network Traffic with Wireshark

Wireshark's main strength lies in its ability to provide detailed information about network traffic:

- **Filter Traffic:** Wireshark allows you to apply filters to narrow down the displayed traffic. For example, typing `http` in the filter bar will only show HTTP traffic.
- **Inspect Packet Details:** Clicking on a packet will display its contents, allowing for deep inspection of the data, including protocols used and data payload.
- **Follow Streams:** Wireshark can reconstruct sessions or streams, giving you a complete view of a conversation or data exchange between two parties.

## Further Learning and Documentation

For those interested in mastering Wireshark, exploring its [official documentation](https://www.wireshark.org/docs/) is highly recommended. It provides in-depth guides on all features, from basic usage to advanced packet analysis techniques.

Notable features include:

- **Decrypting Encrypted Traffic:** With the proper keys, Wireshark can decrypt encrypted traffic, allowing for the analysis of secure sessions.
- **Exporting Captured Data:** Traffic can be exported in various formats for further analysis or reporting.
- **Custom Dissectors:** Advanced users can write their dissectors for custom protocols or applications.

* * *

# Tool #4: Legion

## What is Legion?

Legion is an advanced network penetration testing and reconnaissance tool. It automates and streamlines the process of gathering intelligence, identifying vulnerabilities, and conducting security assessments on networked systems. Built upon a foundation of well-known tools like Nmap and integrating additional functionalities through its graphical user interface (GUI), Legion simplifies the complexity involved in securing networks or auditing them for vulnerabilities.

## Why does it matter?

In cybersecurity, both offensive and defensive strategies benefit greatly from tools like Legion. Attackers might leverage Legion to automate the discovery of network vulnerabilities, streamlining their efforts to identify weak points in a network’s defense. This could lead to the exploitation of vulnerabilities before they’re patched or identified by the network’s administrators. Conversely, defenders utilize Legion as a critical component in their security toolkits to conduct thorough audits and assessments of their networks. By identifying vulnerabilities and potential entry points, security teams can proactively address weaknesses, enhance their network’s security posture, and mitigate the risk of breaches. Additionally, understanding the techniques and tools used by attackers, including Legion, enables defenders to better prepare against potential threats and tailor their defenses to protect against sophisticated attacks.

## Legion Installation

Legion might not come pre-installed on all versions of Kali Linux. Installing it, however, is straightforward:

1.  Update your package list to ensure access to the latest versions of software:
    
    ```
    sudo apt update
    ```
    
2.  Install Legion by entering the following command:
    
    ```
    sudo apt install legion
    ```
    
3.  Verify that Legion has been successfully installed:
    
    ```
    legion --version
    ```
    
    If you encounter an error indicating that Legion is not available via apt, you might need to download it from a repository or its official website, following the provided installation instructions.
    

## Using Legion for Network Reconnaissance

To begin using Legion:

- Launch Legion by typing `legion` in your terminal or navigating through the application menu.
- Once opened, you can start a new scan by inputting the target network or system's IP address or range. Legion uses Nmap under the hood for initial reconnaissance, so familiarize yourself with Nmap's syntax for effective scanning.
- As Legion processes the scan results, it will display discovered hosts, services, and potential vulnerabilities. The tool integrates results from various sources, providing a comprehensive overview of the target's security posture.

## Conducting Vulnerability Assessment with Legion

Legion excels in vulnerability assessment by aggregating results from various scanning tools and scripts:

- **Vulnerability Scanning:** Select targets from the discovered hosts, and utilize Legion's built-in scripts and tools to conduct vulnerability scans.
- **Automated Exploitation:** For identified vulnerabilities, Legion can suggest or automate exploitation techniques, allowing for in-depth security assessments.

## Learning More and Documentation

For those looking to dive deeper into Legion’s capabilities, [the official Legion documentation](https://legion.stanford.edu/documentation/index.html) and user guides are invaluable resources. They provide comprehensive details on utilizing Legion for various security tasks, from basic network scanning to advanced penetration testing strategies.

Noteworthy features to explore:

- **Graphical Network Mapping:** Visualize network topology and relationships between discovered systems and services.
- **Automated Scripting:** Use Legion to automate repetitive tasks and scripts, improving the efficiency of penetration testing efforts.

# Tool #5: Nikto

## What is Nikto?

Nikto is an open-source web server scanner which performs comprehensive tests against web servers for multiple items, including over 6700 potentially dangerous files/CGIs, checks for outdated versions of over 1250 servers, and version-specific problems on over 270 servers. It's designed to find various types of vulnerabilities in web servers and is an essential tool for cybersecurity professionals and ethical hackers.

## Why does it matter?

For attackers, Nikto provides a quick and easy way to identify vulnerabilities that can be exploited in web servers. By automating the process of detecting outdated software, misconfigurations, and potential entry points, attackers can efficiently plan their attacks based on the vulnerabilities identified by Nikto. For defenders, Nikto serves as a powerful tool for regular security assessments of their web servers. By identifying vulnerabilities, defenders can take proactive steps to secure their servers before these weaknesses are exploited by malicious actors. This includes updating software, patching detected vulnerabilities, and configuring servers properly to resist attacks. Understanding how attackers might use tools like Nikto to find vulnerabilities is also crucial for defenders to tailor their protective measures effectively.

## Nikto Installation

Nikto may not be pre-installed on all Kali Linux setups. Installing it is straightforward and ensures that you have a powerful web vulnerability scanner at your disposal:

1.  First, update your system’s package list to ensure you can download the latest software:
    
    ```bash
    sudo apt update
    ```
    
2.  Install Nikto using apt-get by executing the following command:
    
    ```bash
    sudo apt install nikto
    ```
    
3.  To confirm Nikto has been installed correctly and to check its version, type:
    
    ```bash
    nikto -version
    ```
    
    This will display the currently installed version of Nikto on your system.
    

## Using Nikto for Web Server Scanning

To start scanning a web server with Nikto, you only need to know the target’s IP address or hostname:

- Launch a basic scan by entering:
    
    ```bash
    nikto -h http://example.com
    ```
    
    Replace `http://example.com` with the URL of the web server you wish to scan.
    
- Nikto will then perform a series of tests against the target server and report any vulnerabilities or issues found.
    

## Advanced Scanning Options

Nikto allows for customization and fine-tuning of scans with various options:

- **Scanning Specific Ports:** If the web server is running on a non-standard port, use `-p` to specify it:
    
    ```
    nikto -h example.com -p 8080
    ```
    
- **Using SSL/TLS:** For servers using HTTPS, ensure Nikto knows to use SSL with the `-ssl` option:
    
    ```
    nikto -h https://example.com -ssl
    ```
    
- **Saving Scan Results:** Nikto can output scan results into a file for later review with the `-o` option, supporting formats like HTML, CSV, XML, and plain text:
    
    ```
    nikto -h example.com -o report.html
    ```
    

## Further Learning and Documentation

To explore all of Nikto's features and capabilities, [the official Nikto documentation](https://cirt.net/Nikto2) is an excellent resource. It covers detailed usage instructions, options for fine-tuning scans, and guidance on interpreting scan results.

Notable features include:

- **Testing Specific Items:** Nikto can be configured to test for specific vulnerabilities or issues, making scans faster and more relevant to your needs.
    
- **Updating Nikto’s Database:** Keep Nikto effective by regularly updating its database of tests and vulnerabilities:
    
    ```
    nikto -update
    ```
    
***
# Using these tools on our LAMP stack application
